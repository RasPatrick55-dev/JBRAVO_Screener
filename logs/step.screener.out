[2026-01-09T03:13:46.761602+00:00] START screener
[INFO] ENV_LOADED files=["C:\\Users\\RasPa\\JBravoGit\\JBRAVO_Screener\\.env"]
2026-01-08 21:13:47,599 [INFO] __main__: [INFO] ALPACA_CREDENTIALS_OK sanitized={"base_urls": {"data": "https://data.alpaca.markets", "trading": "https://paper-api.alpaca.markets"}, "key_prefix": "PK7I\u2026", "secret_len": 40}
2026-01-08 21:13:47,917 [INFO] __main__: [STAGE] fetch start
2026-01-08 21:13:48,786 [INFO] __main__: Asset meta ready: 12066 symbols (tradable US equities)
2026-01-08 21:13:48,800 [INFO] __main__: Asset metrics: total=13124 tradable_equities=12332 after_filters=12066
2026-01-08 21:13:48,801 [INFO] __main__: Asset sample: BFH.PRA:NYSE, NATH:NASDAQ, WIW:NYSE, NAT:NYSE, NAGE:NASDAQ
2026-01-08 21:13:48,834 [INFO] __main__: Universe sample size: 5881 (of 12066 tradable equities)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\RasPa\miniconda3\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\RasPa\miniconda3\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2192' in position 75: character maps to <undefined>
Call stack:
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 5929, in <module>
    raise SystemExit(main())
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 5913, in main
    return _run()
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 5819, in _run
    ) = _load_alpaca_universe(
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 2139, in _load_alpaca_universe
    universe_df = _apply_universe_hygiene(universe_df, asset_meta)
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 132, in _apply_universe_hygiene
    LOGGER.info("Universe hygiene filtered %d \u2192 %d symbols", before, int(filtered.shape[0]))
Message: 'Universe hygiene filtered %d \u2192 %d symbols'
Arguments: (5881, 4939)
2026-01-08 21:13:48,895 [INFO] __main__: Universe hygiene filtered 5881 \u2192 4939 symbols
2026-01-08 21:13:48,904 [INFO] __main__: Universe prefix counts: {'C': 45, 'A': 45, 'S': 43, 'B': 27, 'E': 21, 'F': 21, 'M': 19, 'N': 19, 'P': 19, 'T': 17, 'G': 17, 'H': 17, 'R': 17, 'O': 16, 'D': 15, 'I': 14, 'V': 14, 'W': 13, 'K': 13, 'L': 10, 'Z': 9, 'J': 5, 'U': 5, 'X': 4, 'Y': 3, 'Q': 2}
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\RasPa\miniconda3\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\RasPa\miniconda3\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2192' in position 112: character maps to <undefined>
Call stack:
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 5929, in <module>
    raise SystemExit(main())
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 5913, in main
    return _run()
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 5819, in _run
    ) = _load_alpaca_universe(
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 2285, in _load_alpaca_universe
    LOGGER.info(
Message: 'Requesting %d trading days ending %s (%s \u2192 %s)'
Arguments: (750, '2026-01-09', '2023-01-12T00:00:00Z', '2026-01-09T23:59:59Z')
2026-01-08 21:13:49,004 [INFO] __main__: Requesting 750 trading days ending 2026-01-09 (2023-01-12T00:00:00Z \u2192 2026-01-09T23:59:59Z)
2026-01-08 21:13:50,883 [WARNING] __main__: Failed to persist batch cache data\cache\bars_1d_iex\2026-01-09\0001.parquet: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
2026-01-08 21:13:50,883 [INFO] __main__: [INFO] bars: batch 01/09 syms=50 pages=4 rows=~35639 elapsed=1.9s cache=miss
2026-01-08 21:13:52,605 [WARNING] __main__: Failed to persist batch cache data\cache\bars_1d_iex\2026-01-09\0002.parquet: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
2026-01-08 21:13:52,605 [INFO] __main__: [INFO] bars: batch 02/09 syms=50 pages=4 rows=~32595 elapsed=1.7s cache=miss
2026-01-08 21:13:54,389 [WARNING] __main__: Failed to persist batch cache data\cache\bars_1d_iex\2026-01-09\0003.parquet: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
2026-01-08 21:13:54,389 [INFO] __main__: [INFO] bars: batch 03/09 syms=50 pages=4 rows=~33019 elapsed=1.8s cache=miss
2026-01-08 21:13:56,120 [WARNING] __main__: Failed to persist batch cache data\cache\bars_1d_iex\2026-01-09\0004.parquet: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
2026-01-08 21:13:56,121 [INFO] __main__: [INFO] bars: batch 04/09 syms=50 pages=4 rows=~32445 elapsed=1.7s cache=miss
2026-01-08 21:13:57,906 [WARNING] __main__: Failed to persist batch cache data\cache\bars_1d_iex\2026-01-09\0005.parquet: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
2026-01-08 21:13:57,906 [INFO] __main__: [INFO] bars: batch 05/09 syms=50 pages=4 rows=~33720 elapsed=1.8s cache=miss
2026-01-08 21:13:59,654 [WARNING] __main__: Failed to persist batch cache data\cache\bars_1d_iex\2026-01-09\0006.parquet: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
2026-01-08 21:13:59,654 [INFO] __main__: [INFO] bars: batch 06/09 syms=50 pages=4 rows=~32593 elapsed=1.7s cache=miss
2026-01-08 21:14:03,030 [WARNING] __main__: Failed to persist batch cache data\cache\bars_1d_iex\2026-01-09\0007.parquet: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
2026-01-08 21:14:03,030 [INFO] __main__: [INFO] bars: batch 07/09 syms=50 pages=4 rows=~34896 elapsed=3.4s cache=miss
2026-01-08 21:14:05,401 [WARNING] __main__: Failed to persist batch cache data\cache\bars_1d_iex\2026-01-09\0008.parquet: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
2026-01-08 21:14:05,401 [INFO] __main__: [INFO] bars: batch 08/09 syms=50 pages=4 rows=~32847 elapsed=2.4s cache=miss
2026-01-08 21:14:07,063 [WARNING] __main__: Failed to persist batch cache data\cache\bars_1d_iex\2026-01-09\0009.parquet: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
2026-01-08 21:14:07,064 [INFO] __main__: [INFO] bars: batch 09/09 syms=50 pages=4 rows=~33545 elapsed=1.7s cache=miss
2026-01-08 21:14:07,435 [INFO] __main__: Bars fetch metrics: batches=9 paged=9 pages=36 rows=301299 symbols_with_bars=414
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\RasPa\miniconda3\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\RasPa\miniconda3\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2192' in position 72: character maps to <undefined>
Call stack:
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 5929, in <module>
    raise SystemExit(main())
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 5913, in main
    return _run()
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 5819, in _run
    ) = _load_alpaca_universe(
  File "C:\Users\RasPa\JBravoGit\JBRAVO_Screener\scripts\screener.py", line 2362, in _load_alpaca_universe
    LOGGER.info(
Message: 'Bars window attempts: %s \u2192 used=%d'
Arguments: ([750], 750)
2026-01-08 21:14:07,435 [INFO] __main__: Bars window attempts: [750] \u2192 used=750
2026-01-08 21:14:07,436 [INFO] __main__: Symbols without bars (sample): ['CMDB', 'KCHV', 'DYOR', 'PELIR', 'SZZLR', 'ALUB', 'JBS', 'KCHVR', 'QSEA', 'SLGB']
2026-01-08 21:14:07,436 [INFO] __main__: Symbols dropped for insufficient history: 27
2026-01-08 21:14:09,171 [INFO] __main__: [STAGE] fetch end (rows=301299, elapsed=21.25s)
2026-01-08 21:14:10,621 [INFO] __main__: [INFO] DAILY_BARS_EXPORTED path=C:\Users\RasPa\JBravoGit\JBRAVO_Screener\data\daily_bars.csv rows=301299 symbols=423
2026-01-08 21:14:10,623 [WARNING] __main__: PyYAML unavailable; using built-in ranker defaults.
2026-01-08 21:14:10,661 [INFO] __main__: [INFO] SENTIMENT enabled=False url_set=False weight=0.000 min=-999.000
2026-01-08 21:14:10,931 [WARNING] __main__: PyYAML unavailable; using built-in ranker defaults.
2026-01-08 21:14:10,932 [INFO] __main__: [STAGE] coarse features start
2026-01-08 21:16:01,820 [INFO] __main__: [STAGE] coarse features end (rows=301299)
2026-01-08 21:16:01,820 [INFO] __main__: [STAGE] coarse rank start
2026-01-08 21:16:01,934 [INFO] __main__: [STAGE] coarse rank end (rows=423)
2026-01-08 21:16:01,941 [INFO] __main__: [STAGE] shortlist written: data\tmp\shortlist.csv (rows=423)
2026-01-08 21:16:01,962 [INFO] __main__: [STAGE] full features start (shortlist=423)
2026-01-08 21:17:51,529 [INFO] __main__: [STAGE] full features end (rows=301299)
2026-01-08 21:17:51,664 [INFO] __main__: [STAGE] finalize candidates pruned rows=301299 -> 264852
2026-01-08 21:17:51,664 [INFO] __main__: [STAGE] full rank start
2026-01-08 21:17:51,783 [INFO] __main__: [STAGE] full rank end (rows=423)
2026-01-08 21:17:51,783 [INFO] __main__: [INFO] SENTIMENT_STAGE enter df_rows=423 cols_has_symbol=True cache_dir=data\cache\sentiment run_date=2026-01-09
2026-01-08 21:17:51,784 [INFO] __main__: [INFO] SENTIMENT_FETCH skipped reason=disabled
2026-01-08 21:17:51,785 [INFO] __main__: [STAGE] quality filters pruned rows=423 -> 77
2026-01-08 21:17:51,787 [INFO] __main__: [STAGE] gates start
2026-01-08 21:17:51,795 [INFO] __main__: [STAGE] gates end (candidates=0)
2026-01-08 21:17:54,983 [INFO] __main__: No candidates passed ranking gates; sample rejections: [{"reason": "INSUFFICIENT_HISTORY", "symbol": "KCHV"}, {"reason": "INSUFFICIENT_HISTORY", "symbol": "CMDB"}, {"reason": "INSUFFICIENT_HISTORY", "symbol": "PELIR"}, {"reason": "INSUFFICIENT_HISTORY", "symbol": "ALUB"}, {"reason": "INSUFFICIENT_HISTORY", "symbol": "DYOR"}, {"reason": "INSUFFICIENT_HISTORY", "symbol": "SZZLR"}, {"reason": "INSUFFICIENT_HISTORY", "symbol": "JBS"}, {"reason": "INSUFFICIENT_HISTORY", "symbol": "KCHVR"}, {"reason": "INSUFFICIENT_HISTORY", "symbol": "SLGB"}, {"reason": "INSUFFICIENT_HISTORY", "symbol": "QSEA"}]
2026-01-08 21:17:55,071 [INFO] __main__: [STAGE] predictions written: data\predictions\2026-01-09.csv (top_n=77)
2026-01-08 21:17:55,083 [INFO] __main__: Screener complete: 7577 symbols examined, 0 candidates.
[2026-01-09T03:17:55.205388+00:00] END screener rc=0 secs=248.4
